<Window x:Class="FathomOS.Shell.Views.CertificateListWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Certificate Manager"
        Width="1000" Height="600"
        WindowStartupLocation="CenterOwner"
        Background="#F0F0F0">
    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        
        <!-- Header -->
        <Border Grid.Row="0" Background="#0066CC" Padding="20,15">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <StackPanel Grid.Column="0">
                    <TextBlock Text="Certificate Manager" 
                               FontSize="20" FontWeight="SemiBold" Foreground="White"/>
                    <TextBlock x:Name="txtSubtitle" Text="View and manage processing certificates" 
                               FontSize="12" Foreground="#CCE5FF" Margin="0,5,0,0"/>
                </StackPanel>
                
                <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center">
                    <TextBlock x:Name="txtCertCount" Text="0 certificates" 
                               Foreground="White" FontSize="14" VerticalAlignment="Center" Margin="0,0,15,0"/>
                    <TextBlock x:Name="txtSyncStatus" Text="" 
                               Foreground="#FFE082" FontSize="12" VerticalAlignment="Center"/>
                </StackPanel>
            </Grid>
        </Border>
        
        <!-- Search Bar -->
        <Border Grid.Row="1" Background="White" Padding="15" BorderBrush="#DDD" BorderThickness="0,0,0,1">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <!-- Search box -->
                <Grid Grid.Column="0" Margin="0,0,15,0">
                    <TextBox x:Name="txtSearch" 
                             Padding="10,8,35,8" FontSize="14"
                             KeyUp="txtSearch_KeyUp"/>
                    <TextBlock Text="ðŸ”" 
                               HorizontalAlignment="Right" VerticalAlignment="Center"
                               Margin="0,0,12,0" Foreground="#999" FontSize="14"
                               IsHitTestVisible="False"/>
                </Grid>
                
                <!-- Refresh button -->
                <Button x:Name="btnRefresh" Grid.Column="1" Content="âŸ³ Refresh" 
                        Width="100" Height="35"
                        Click="btnRefresh_Click"/>
            </Grid>
        </Border>
        
        <!-- Certificate List -->
        <Border Grid.Row="2" Margin="15" Background="White" BorderBrush="#DDD" BorderThickness="1">
            <DataGrid x:Name="dgCertificates" 
                      AutoGenerateColumns="False"
                      IsReadOnly="True"
                      SelectionMode="Single"
                      GridLinesVisibility="Horizontal"
                      HeadersVisibility="Column"
                      CanUserResizeRows="False"
                      RowHeight="45"
                      MouseDoubleClick="dgCertificates_MouseDoubleClick">
                
                <DataGrid.Columns>
                    <DataGridTextColumn Header="Certificate ID" Binding="{Binding CertificateId}" Width="200">
                        <DataGridTextColumn.ElementStyle>
                            <Style TargetType="TextBlock">
                                <Setter Property="FontFamily" Value="Consolas"/>
                                <Setter Property="FontSize" Value="12"/>
                                <Setter Property="VerticalAlignment" Value="Center"/>
                                <Setter Property="Padding" Value="10,0"/>
                            </Style>
                        </DataGridTextColumn.ElementStyle>
                    </DataGridTextColumn>
                    
                    <DataGridTextColumn Header="Project" Binding="{Binding ProjectName}" Width="200">
                        <DataGridTextColumn.ElementStyle>
                            <Style TargetType="TextBlock">
                                <Setter Property="VerticalAlignment" Value="Center"/>
                                <Setter Property="Padding" Value="10,0"/>
                            </Style>
                        </DataGridTextColumn.ElementStyle>
                    </DataGridTextColumn>
                    
                    <DataGridTextColumn Header="Module" Binding="{Binding ModuleId}" Width="150">
                        <DataGridTextColumn.ElementStyle>
                            <Style TargetType="TextBlock">
                                <Setter Property="VerticalAlignment" Value="Center"/>
                                <Setter Property="Padding" Value="10,0"/>
                            </Style>
                        </DataGridTextColumn.ElementStyle>
                    </DataGridTextColumn>
                    
                    <DataGridTextColumn Header="Issued" Binding="{Binding IssuedAt, StringFormat='{}{0:dd MMM yyyy HH:mm}'}" Width="140">
                        <DataGridTextColumn.ElementStyle>
                            <Style TargetType="TextBlock">
                                <Setter Property="VerticalAlignment" Value="Center"/>
                                <Setter Property="Padding" Value="10,0"/>
                            </Style>
                        </DataGridTextColumn.ElementStyle>
                    </DataGridTextColumn>
                    
                    <DataGridTextColumn Header="Signatory" Binding="{Binding SignatoryName}" Width="150">
                        <DataGridTextColumn.ElementStyle>
                            <Style TargetType="TextBlock">
                                <Setter Property="VerticalAlignment" Value="Center"/>
                                <Setter Property="Padding" Value="10,0"/>
                            </Style>
                        </DataGridTextColumn.ElementStyle>
                    </DataGridTextColumn>
                    
                    <DataGridTextColumn Header="Status" Binding="{Binding SyncStatusDisplay}" Width="100">
                        <DataGridTextColumn.ElementStyle>
                            <Style TargetType="TextBlock">
                                <Setter Property="VerticalAlignment" Value="Center"/>
                                <Setter Property="HorizontalAlignment" Value="Center"/>
                            </Style>
                        </DataGridTextColumn.ElementStyle>
                    </DataGridTextColumn>
                </DataGrid.Columns>
            </DataGrid>
        </Border>
        
        <!-- Footer -->
        <Border Grid.Row="3" Background="#F5F5F5" Padding="15,12" BorderBrush="#DDD" BorderThickness="0,1,0,0">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <TextBlock x:Name="txtStatus" Grid.Column="0" 
                           Text="Double-click a certificate to view details" 
                           Foreground="#888" FontSize="12" VerticalAlignment="Center"/>
                
                <StackPanel Grid.Column="1" Orientation="Horizontal">
                    <Button x:Name="btnExport" Content="Export Selected" 
                            Width="120" Height="32" Margin="0,0,10,0"
                            Click="btnExport_Click"/>
                    <Button x:Name="btnView" Content="View Certificate" 
                            Width="120" Height="32" Margin="0,0,10,0"
                            Background="#0066CC" Foreground="White"
                            Click="btnView_Click"/>
                    <Button x:Name="btnClose" Content="Close" 
                            Width="80" Height="32"
                            Click="btnClose_Click"/>
                </StackPanel>
            </Grid>
        </Border>
    </Grid>
</Window>
