<Window x:Class="FathomOS.Shell.Views.SettingsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Settings - Fathom OS"
        Height="650" Width="850"
        MinHeight="550" MinWidth="750"
        WindowStartupLocation="CenterOwner"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        ResizeMode="CanResizeWithGrip"
        ShowInTaskbar="False">

    <Window.Resources>
        <!-- Easing Functions -->
        <QuadraticEase x:Key="EaseOut" EasingMode="EaseOut"/>
        <QuadraticEase x:Key="EaseInOut" EasingMode="EaseInOut"/>

        <!-- Tab Button Style -->
        <Style x:Key="SettingsTabButton" TargetType="RadioButton">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="{DynamicResource SecondaryTextBrush}"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="16,12"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="HorizontalContentAlignment" Value="Left"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="RadioButton">
                        <Border x:Name="border" Background="{TemplateBinding Background}"
                                CornerRadius="8" Margin="4,2" Padding="{TemplateBinding Padding}">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock x:Name="icon" Grid.Column="0" Text="{TemplateBinding Tag}"
                                           FontSize="16" Margin="0,0,12,0" VerticalAlignment="Center"/>
                                <TextBlock Grid.Column="1" Text="{TemplateBinding Content}"
                                           FontSize="13" FontWeight="Medium"
                                           VerticalAlignment="Center"/>
                            </Grid>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="{DynamicResource ButtonHoverBrush}"/>
                            </Trigger>
                            <Trigger Property="IsChecked" Value="True">
                                <Setter TargetName="border" Property="Background" Value="{DynamicResource AccentBrush}"/>
                                <Setter Property="Foreground" Value="White"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Section Header Style -->
        <Style x:Key="SectionHeader" TargetType="TextBlock">
            <Setter Property="FontSize" Value="11"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Foreground" Value="{DynamicResource AccentBrush}"/>
            <Setter Property="Margin" Value="0,20,0,12"/>
            <Setter Property="Opacity" Value="0.8"/>
        </Style>

        <!-- Setting Item Style -->
        <Style x:Key="SettingLabel" TargetType="TextBlock">
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="Foreground" Value="{DynamicResource TextBrush}"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
        </Style>

        <!-- Setting Description Style -->
        <Style x:Key="SettingDescription" TargetType="TextBlock">
            <Setter Property="FontSize" Value="11"/>
            <Setter Property="Foreground" Value="{DynamicResource SecondaryTextBrush}"/>
            <Setter Property="Opacity" Value="0.7"/>
            <Setter Property="TextWrapping" Value="Wrap"/>
            <Setter Property="Margin" Value="0,4,0,0"/>
        </Style>

        <!-- Modern ComboBox Style -->
        <Style x:Key="ModernComboBox" TargetType="ComboBox">
            <Setter Property="Background" Value="{DynamicResource ButtonBackgroundBrush}"/>
            <Setter Property="Foreground" Value="{DynamicResource TextBrush}"/>
            <Setter Property="BorderBrush" Value="{DynamicResource BorderBrush}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="12,8"/>
            <Setter Property="MinWidth" Value="180"/>
            <Setter Property="Height" Value="36"/>
        </Style>

        <!-- Modern Button Style -->
        <Style x:Key="ModernButton" TargetType="Button">
            <Setter Property="Background" Value="{DynamicResource ButtonBackgroundBrush}"/>
            <Setter Property="Foreground" Value="{DynamicResource TextBrush}"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="20,10"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border" Background="{TemplateBinding Background}"
                                CornerRadius="6" Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="{DynamicResource ButtonHoverBrush}"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="border" Property="Background" Value="{DynamicResource ButtonPressedBrush}"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter Property="Opacity" Value="0.5"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Primary Button Style -->
        <Style x:Key="PrimaryButton" TargetType="Button" BasedOn="{StaticResource ModernButton}">
            <Setter Property="Background" Value="{DynamicResource AccentBrush}"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border" Background="{TemplateBinding Background}"
                                CornerRadius="6" Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="{DynamicResource AccentHoverBrush}"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter Property="Opacity" Value="0.5"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Danger Button Style -->
        <Style x:Key="DangerButton" TargetType="Button" BasedOn="{StaticResource ModernButton}">
            <Setter Property="Background" Value="#D32F2F"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border" Background="{TemplateBinding Background}"
                                CornerRadius="6" Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#E53935"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Toggle Switch Style -->
        <Style x:Key="ToggleSwitch" TargetType="CheckBox">
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="CheckBox">
                        <Grid>
                            <Border x:Name="track" Width="44" Height="24" CornerRadius="12"
                                    Background="{DynamicResource ButtonBackgroundBrush}"/>
                            <Border x:Name="thumb" Width="18" Height="18" CornerRadius="9"
                                    Background="#A6ADC8" HorizontalAlignment="Left"
                                    Margin="3,0,0,0">
                                <Border.RenderTransform>
                                    <TranslateTransform x:Name="thumbTranslate" X="0"/>
                                </Border.RenderTransform>
                            </Border>
                        </Grid>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsChecked" Value="True">
                                <Setter TargetName="track" Property="Background" Value="{DynamicResource AccentBrush}"/>
                                <Setter TargetName="thumb" Property="Background" Value="White"/>
                                <Trigger.EnterActions>
                                    <BeginStoryboard>
                                        <Storyboard>
                                            <DoubleAnimation Storyboard.TargetName="thumbTranslate"
                                                             Storyboard.TargetProperty="X"
                                                             To="20" Duration="0:0:0.15"
                                                             EasingFunction="{StaticResource EaseOut}"/>
                                        </Storyboard>
                                    </BeginStoryboard>
                                </Trigger.EnterActions>
                                <Trigger.ExitActions>
                                    <BeginStoryboard>
                                        <Storyboard>
                                            <DoubleAnimation Storyboard.TargetName="thumbTranslate"
                                                             Storyboard.TargetProperty="X"
                                                             To="0" Duration="0:0:0.15"
                                                             EasingFunction="{StaticResource EaseOut}"/>
                                        </Storyboard>
                                    </BeginStoryboard>
                                </Trigger.ExitActions>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <!-- Main Window Border -->
    <Border Background="{DynamicResource WindowBackgroundBrush}"
            BorderBrush="{DynamicResource WindowBorderBrush}"
            BorderThickness="1" CornerRadius="12">
        <Border.Effect>
            <DropShadowEffect BlurRadius="20" ShadowDepth="0" Opacity="0.5"/>
        </Border.Effect>

        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="44"/>  <!-- Title Bar -->
                <RowDefinition Height="*"/>   <!-- Content -->
            </Grid.RowDefinitions>

            <!-- Title Bar -->
            <Border Grid.Row="0" Background="{DynamicResource TitleBarBrush}"
                    CornerRadius="12,12,0,0" MouseLeftButtonDown="TitleBar_MouseLeftButtonDown">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <StackPanel Orientation="Horizontal" Margin="16,0,0,0" VerticalAlignment="Center">
                        <TextBlock Text="&#x2699;" FontSize="16" VerticalAlignment="Center" Margin="0,0,10,0"
                                   Foreground="{DynamicResource AccentBrush}"/>
                        <TextBlock Text="Settings" FontSize="13" FontWeight="SemiBold"
                                   Foreground="{DynamicResource TitleTextBrush}" VerticalAlignment="Center"/>
                    </StackPanel>

                    <Button Grid.Column="1" Content="&#xE106;" Click="Close_Click"
                            Width="44" Height="44" FontFamily="Segoe MDL2 Assets" FontSize="10"
                            Background="Transparent" BorderThickness="0" Cursor="Hand"
                            Foreground="{DynamicResource SecondaryTextBrush}">
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <Border x:Name="border" Background="{TemplateBinding Background}"
                                        CornerRadius="0,12,0,0">
                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                </Border>
                                <ControlTemplate.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter TargetName="border" Property="Background" Value="#E81123"/>
                                        <Setter Property="Foreground" Value="White"/>
                                    </Trigger>
                                </ControlTemplate.Triggers>
                            </ControlTemplate>
                        </Button.Template>
                    </Button>
                </Grid>
            </Border>

            <!-- Main Content -->
            <Grid Grid.Row="1">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="220"/>  <!-- Sidebar -->
                    <ColumnDefinition Width="*"/>    <!-- Content -->
                </Grid.ColumnDefinitions>

                <!-- Sidebar -->
                <Border Grid.Column="0" Background="{DynamicResource HeaderBackgroundBrush}"
                        CornerRadius="0,0,0,12">
                    <StackPanel Margin="8,16,8,8">
                        <RadioButton x:Name="TabGeneral" Style="{StaticResource SettingsTabButton}"
                                     Content="General" Tag="&#x2699;" IsChecked="True"
                                     Checked="Tab_Checked" GroupName="SettingsTabs"/>
                        <RadioButton x:Name="TabLicense" Style="{StaticResource SettingsTabButton}"
                                     Content="License" Tag="&#x1F512;"
                                     Checked="Tab_Checked" GroupName="SettingsTabs"/>
                        <RadioButton x:Name="TabServer" Style="{StaticResource SettingsTabButton}"
                                     Content="Server Connection" Tag="&#x1F310;"
                                     Checked="Tab_Checked" GroupName="SettingsTabs"/>
                        <RadioButton x:Name="TabData" Style="{StaticResource SettingsTabButton}"
                                     Content="Data &amp; Cache" Tag="&#x1F5C4;"
                                     Checked="Tab_Checked" GroupName="SettingsTabs"/>
                        <RadioButton x:Name="TabAbout" Style="{StaticResource SettingsTabButton}"
                                     Content="About" Tag="&#x2139;"
                                     Checked="Tab_Checked" GroupName="SettingsTabs"/>
                    </StackPanel>
                </Border>

                <!-- Content Area -->
                <Border Grid.Column="1" Padding="32,24" CornerRadius="0,0,12,0">
                    <ScrollViewer VerticalScrollBarVisibility="Auto">
                        <Grid>
                            <!-- General Settings Panel -->
                            <StackPanel x:Name="PanelGeneral" Visibility="Visible">
                                <TextBlock Text="APPEARANCE" Style="{StaticResource SectionHeader}" Margin="0,0,0,12"/>

                                <!-- Theme Selection -->
                                <Grid Margin="0,0,0,20">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <StackPanel>
                                        <TextBlock Text="Theme" Style="{StaticResource SettingLabel}"/>
                                        <TextBlock Text="Choose your preferred color scheme" Style="{StaticResource SettingDescription}"/>
                                    </StackPanel>
                                    <ComboBox x:Name="CmbTheme" Grid.Column="1" Style="{StaticResource ModernComboBox}"
                                              SelectionChanged="Theme_SelectionChanged">
                                        <ComboBoxItem Content="Dark" Tag="Dark"/>
                                        <ComboBoxItem Content="Light" Tag="Light"/>
                                        <ComboBoxItem Content="System" Tag="System"/>
                                    </ComboBox>
                                </Grid>

                                <!-- Language Selection -->
                                <Grid Margin="0,0,0,20">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <StackPanel>
                                        <TextBlock Text="Language" Style="{StaticResource SettingLabel}"/>
                                        <TextBlock Text="Select your preferred language" Style="{StaticResource SettingDescription}"/>
                                    </StackPanel>
                                    <ComboBox x:Name="CmbLanguage" Grid.Column="1" Style="{StaticResource ModernComboBox}">
                                        <ComboBoxItem Content="English" Tag="en" IsSelected="True"/>
                                        <ComboBoxItem Content="Spanish" Tag="es"/>
                                        <ComboBoxItem Content="French" Tag="fr"/>
                                        <ComboBoxItem Content="German" Tag="de"/>
                                    </ComboBox>
                                </Grid>

                                <TextBlock Text="STARTUP" Style="{StaticResource SectionHeader}"/>

                                <!-- Start with Windows -->
                                <Grid Margin="0,0,0,16">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <StackPanel>
                                        <TextBlock Text="Start with Windows" Style="{StaticResource SettingLabel}"/>
                                        <TextBlock Text="Launch Fathom OS when Windows starts" Style="{StaticResource SettingDescription}"/>
                                    </StackPanel>
                                    <CheckBox x:Name="ChkStartWithWindows" Grid.Column="1" Style="{StaticResource ToggleSwitch}"/>
                                </Grid>

                                <!-- Start Minimized -->
                                <Grid Margin="0,0,0,16">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <StackPanel>
                                        <TextBlock Text="Start minimized" Style="{StaticResource SettingLabel}"/>
                                        <TextBlock Text="Minimize to system tray on startup" Style="{StaticResource SettingDescription}"/>
                                    </StackPanel>
                                    <CheckBox x:Name="ChkStartMinimized" Grid.Column="1" Style="{StaticResource ToggleSwitch}"/>
                                </Grid>

                                <!-- Check for Updates -->
                                <Grid Margin="0,0,0,16">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <StackPanel>
                                        <TextBlock Text="Check for updates on startup" Style="{StaticResource SettingLabel}"/>
                                        <TextBlock Text="Automatically check for new versions when Fathom OS starts" Style="{StaticResource SettingDescription}"/>
                                    </StackPanel>
                                    <CheckBox x:Name="ChkCheckUpdates" Grid.Column="1" Style="{StaticResource ToggleSwitch}" IsChecked="True"/>
                                </Grid>

                                <TextBlock Text="NOTIFICATIONS" Style="{StaticResource SectionHeader}"/>

                                <!-- Enable Notifications -->
                                <Grid Margin="0,0,0,16">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <StackPanel>
                                        <TextBlock Text="Enable notifications" Style="{StaticResource SettingLabel}"/>
                                        <TextBlock Text="Show toast notifications for important events" Style="{StaticResource SettingDescription}"/>
                                    </StackPanel>
                                    <CheckBox x:Name="ChkEnableNotifications" Grid.Column="1" Style="{StaticResource ToggleSwitch}" IsChecked="True"/>
                                </Grid>
                            </StackPanel>

                            <!-- License Settings Panel -->
                            <StackPanel x:Name="PanelLicense" Visibility="Collapsed">
                                <TextBlock Text="LICENSE INFORMATION" Style="{StaticResource SectionHeader}" Margin="0,0,0,12"/>

                                <!-- License Status Card -->
                                <Border Background="{DynamicResource TileBackgroundBrush}"
                                        CornerRadius="10" Padding="20" Margin="0,0,0,20">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <StackPanel>
                                            <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                                                <Border x:Name="LicenseBadge" Background="#2E7D32" CornerRadius="6"
                                                        Padding="10,4" Margin="0,0,10,0">
                                                    <TextBlock x:Name="TxtLicenseEdition" Text="PROFESSIONAL"
                                                               FontSize="11" FontWeight="Bold" Foreground="White"/>
                                                </Border>
                                                <TextBlock x:Name="TxtLicenseStatus" Text="Active"
                                                           FontSize="12" Foreground="{DynamicResource SuccessBrush}"
                                                           VerticalAlignment="Center" FontWeight="Medium"/>
                                            </StackPanel>
                                            <TextBlock x:Name="TxtLicensedTo" Text="Licensed to: Fathom Company"
                                                       FontSize="13" Foreground="{DynamicResource TextBrush}"/>
                                            <TextBlock x:Name="TxtLicenseExpiry" Text="Expires: December 31, 2025"
                                                       FontSize="11" Foreground="{DynamicResource SecondaryTextBrush}"
                                                       Opacity="0.7" Margin="0,4,0,0"/>
                                        </StackPanel>
                                        <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                            <Button Content="View License" Style="{StaticResource ModernButton}"
                                                    Click="ViewLicense_Click" Margin="0,0,0,8"/>
                                        </StackPanel>
                                    </Grid>
                                </Border>

                                <TextBlock Text="LICENSE ACTIONS" Style="{StaticResource SectionHeader}"/>

                                <StackPanel Orientation="Horizontal" Margin="0,0,0,16">
                                    <Button Content="Activate New License" Style="{StaticResource PrimaryButton}"
                                            Click="ActivateLicense_Click" Margin="0,0,12,0"/>
                                    <Button Content="Deactivate License" Style="{StaticResource ModernButton}"
                                            Click="DeactivateLicense_Click"/>
                                </StackPanel>

                                <TextBlock Text="LICENSED MODULES" Style="{StaticResource SectionHeader}"/>

                                <ItemsControl x:Name="LicensedModulesList">
                                    <ItemsControl.ItemTemplate>
                                        <DataTemplate>
                                            <Border Background="{DynamicResource ListItemBackgroundBrush}"
                                                    CornerRadius="6" Padding="12,10" Margin="0,4">
                                                <Grid>
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="Auto"/>
                                                        <ColumnDefinition Width="*"/>
                                                        <ColumnDefinition Width="Auto"/>
                                                    </Grid.ColumnDefinitions>
                                                    <TextBlock Text="{Binding Icon}" FontSize="20" Margin="0,0,12,0"
                                                               VerticalAlignment="Center"/>
                                                    <TextBlock Grid.Column="1" Text="{Binding Name}"
                                                               FontSize="12" Foreground="{DynamicResource TextBrush}"
                                                               VerticalAlignment="Center"/>
                                                    <TextBlock Grid.Column="2" Text="Licensed"
                                                               FontSize="11" Foreground="{DynamicResource SuccessBrush}"
                                                               VerticalAlignment="Center"/>
                                                </Grid>
                                            </Border>
                                        </DataTemplate>
                                    </ItemsControl.ItemTemplate>
                                </ItemsControl>
                            </StackPanel>

                            <!-- Server Connection Panel -->
                            <StackPanel x:Name="PanelServer" Visibility="Collapsed">
                                <TextBlock Text="SERVER CONNECTION" Style="{StaticResource SectionHeader}" Margin="0,0,0,12"/>

                                <!-- Connection Status -->
                                <Border Background="{DynamicResource TileBackgroundBrush}"
                                        CornerRadius="10" Padding="20" Margin="0,0,0,20">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <Ellipse x:Name="ServerStatusDot" Width="12" Height="12" Margin="0,0,12,0"
                                                 VerticalAlignment="Center"/>
                                        <StackPanel Grid.Column="1">
                                            <TextBlock x:Name="TxtServerStatusTitle" Text="Connected"
                                                       FontSize="14" FontWeight="SemiBold"
                                                       Foreground="{DynamicResource TextBrush}"/>
                                            <TextBlock x:Name="TxtServerUrl" Text="s7fathom-license-server.onrender.com"
                                                       FontSize="11" Foreground="{DynamicResource SecondaryTextBrush}"
                                                       Opacity="0.7" Margin="0,2,0,0"/>
                                        </StackPanel>
                                        <Button Grid.Column="2" Content="Test Connection"
                                                Style="{StaticResource ModernButton}"
                                                Click="TestConnection_Click"/>
                                    </Grid>
                                </Border>

                                <TextBlock Text="SERVER SETTINGS" Style="{StaticResource SectionHeader}"/>

                                <!-- Auto Sync -->
                                <Grid Margin="0,0,0,16">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <StackPanel>
                                        <TextBlock Text="Auto-sync certificates" Style="{StaticResource SettingLabel}"/>
                                        <TextBlock Text="Automatically sync processing certificates with server" Style="{StaticResource SettingDescription}"/>
                                    </StackPanel>
                                    <CheckBox x:Name="ChkAutoSync" Grid.Column="1" Style="{StaticResource ToggleSwitch}" IsChecked="True"/>
                                </Grid>

                                <!-- Sync Interval -->
                                <Grid Margin="0,0,0,16">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <StackPanel>
                                        <TextBlock Text="Sync interval" Style="{StaticResource SettingLabel}"/>
                                        <TextBlock Text="How often to sync with the license server" Style="{StaticResource SettingDescription}"/>
                                    </StackPanel>
                                    <ComboBox x:Name="CmbSyncInterval" Grid.Column="1" Style="{StaticResource ModernComboBox}">
                                        <ComboBoxItem Content="5 minutes" Tag="5"/>
                                        <ComboBoxItem Content="15 minutes" Tag="15" IsSelected="True"/>
                                        <ComboBoxItem Content="30 minutes" Tag="30"/>
                                        <ComboBoxItem Content="1 hour" Tag="60"/>
                                    </ComboBox>
                                </Grid>

                                <!-- Offline Mode -->
                                <Grid Margin="0,0,0,16">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <StackPanel>
                                        <TextBlock Text="Allow offline mode" Style="{StaticResource SettingLabel}"/>
                                        <TextBlock Text="Continue working when server connection is unavailable" Style="{StaticResource SettingDescription}"/>
                                    </StackPanel>
                                    <CheckBox x:Name="ChkOfflineMode" Grid.Column="1" Style="{StaticResource ToggleSwitch}" IsChecked="True"/>
                                </Grid>
                            </StackPanel>

                            <!-- Data & Cache Panel -->
                            <StackPanel x:Name="PanelData" Visibility="Collapsed">
                                <TextBlock Text="STORAGE" Style="{StaticResource SectionHeader}" Margin="0,0,0,12"/>

                                <!-- Data Location -->
                                <Grid Margin="0,0,0,20">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <StackPanel>
                                        <TextBlock Text="Data location" Style="{StaticResource SettingLabel}"/>
                                        <TextBlock x:Name="TxtDataLocation" Text="C:\Users\...\AppData\Local\FathomOS"
                                                   Style="{StaticResource SettingDescription}"/>
                                    </StackPanel>
                                    <Button Content="Open Folder" Style="{StaticResource ModernButton}"
                                            Click="OpenDataFolder_Click" Grid.Column="1"/>
                                </Grid>

                                <!-- Storage Usage -->
                                <Border Background="{DynamicResource TileBackgroundBrush}"
                                        CornerRadius="10" Padding="20" Margin="0,0,0,20">
                                    <StackPanel>
                                        <Grid Margin="0,0,0,12">
                                            <TextBlock Text="Storage usage" FontSize="13"
                                                       Foreground="{DynamicResource TextBrush}"/>
                                            <TextBlock x:Name="TxtStorageUsed" Text="245 MB used"
                                                       FontSize="12" Foreground="{DynamicResource SecondaryTextBrush}"
                                                       HorizontalAlignment="Right"/>
                                        </Grid>
                                        <Grid Height="8" Margin="0,0,0,8">
                                            <Border CornerRadius="4" Background="{DynamicResource ButtonBackgroundBrush}"/>
                                            <Border x:Name="StorageBar" CornerRadius="4" HorizontalAlignment="Left"
                                                    Width="100" Background="{DynamicResource AccentBrush}"/>
                                        </Grid>
                                        <Grid>
                                            <TextBlock Text="Cache" FontSize="11"
                                                       Foreground="{DynamicResource SecondaryTextBrush}"/>
                                            <TextBlock x:Name="TxtCacheSize" Text="128 MB"
                                                       FontSize="11" Foreground="{DynamicResource SecondaryTextBrush}"
                                                       HorizontalAlignment="Right"/>
                                        </Grid>
                                    </StackPanel>
                                </Border>

                                <TextBlock Text="CACHE MANAGEMENT" Style="{StaticResource SectionHeader}"/>

                                <StackPanel Orientation="Horizontal" Margin="0,0,0,20">
                                    <Button Content="Clear Cache" Style="{StaticResource ModernButton}"
                                            Click="ClearCache_Click" Margin="0,0,12,0"/>
                                    <Button Content="Clear All Data" Style="{StaticResource DangerButton}"
                                            Click="ClearAllData_Click"/>
                                </StackPanel>

                                <TextBlock Text="EXPORT / IMPORT" Style="{StaticResource SectionHeader}"/>

                                <StackPanel Orientation="Horizontal">
                                    <Button Content="Export Settings" Style="{StaticResource ModernButton}"
                                            Click="ExportSettings_Click" Margin="0,0,12,0"/>
                                    <Button Content="Import Settings" Style="{StaticResource ModernButton}"
                                            Click="ImportSettings_Click"/>
                                </StackPanel>
                            </StackPanel>

                            <!-- About Panel -->
                            <StackPanel x:Name="PanelAbout" Visibility="Collapsed">
                                <TextBlock Text="ABOUT FATHOM OS" Style="{StaticResource SectionHeader}" Margin="0,0,0,12"/>

                                <!-- Logo and Version -->
                                <Border Background="{DynamicResource TileBackgroundBrush}"
                                        CornerRadius="10" Padding="24" Margin="0,0,0,24">
                                    <StackPanel HorizontalAlignment="Center">
                                        <Border Width="80" Height="80" CornerRadius="16" Margin="0,0,0,16"
                                                HorizontalAlignment="Center">
                                            <Border.Background>
                                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                                    <GradientStop Color="#89B4FA" Offset="0"/>
                                                    <GradientStop Color="#74C7EC" Offset="0.5"/>
                                                    <GradientStop Color="#B4BEFE" Offset="1"/>
                                                </LinearGradientBrush>
                                            </Border.Background>
                                            <TextBlock Text="&#x1F30A;" FontSize="36"
                                                       HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                        </Border>
                                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                            <TextBlock Text="FATHOM" FontSize="28" FontWeight="Bold"
                                                       Foreground="{DynamicResource AccentBrush}"/>
                                            <TextBlock Text=" OS" FontSize="28" FontWeight="Light"
                                                       Foreground="{DynamicResource TextBrush}"/>
                                        </StackPanel>
                                        <TextBlock x:Name="TxtVersion" Text="Version 1.0.45"
                                                   FontSize="12" Foreground="{DynamicResource SecondaryTextBrush}"
                                                   HorizontalAlignment="Center" Margin="0,4,0,0"/>
                                        <TextBlock Text="Hydrographic Survey Data Processing Platform"
                                                   FontSize="11" Foreground="{DynamicResource SecondaryTextBrush}"
                                                   HorizontalAlignment="Center" Margin="0,4,0,0" Opacity="0.7"/>
                                    </StackPanel>
                                </Border>

                                <TextBlock Text="UPDATES" Style="{StaticResource SectionHeader}"/>

                                <Grid Margin="0,0,0,20">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <StackPanel>
                                        <TextBlock x:Name="TxtUpdateStatus" Text="You are running the latest version"
                                                   FontSize="13" Foreground="{DynamicResource TextBrush}"/>
                                        <TextBlock x:Name="TxtLastChecked" Text="Last checked: Today at 3:45 PM"
                                                   FontSize="11" Foreground="{DynamicResource SecondaryTextBrush}"
                                                   Opacity="0.7" Margin="0,4,0,0"/>
                                    </StackPanel>
                                    <Button Content="Check for Updates" Style="{StaticResource PrimaryButton}"
                                            Click="CheckUpdates_Click" Grid.Column="1"/>
                                </Grid>

                                <TextBlock Text="LINKS" Style="{StaticResource SectionHeader}"/>

                                <StackPanel Margin="0,0,0,20">
                                    <Button Content="Documentation" Style="{StaticResource ModernButton}"
                                            HorizontalAlignment="Left" Margin="0,4" Click="OpenDocs_Click"/>
                                    <Button Content="Release Notes" Style="{StaticResource ModernButton}"
                                            HorizontalAlignment="Left" Margin="0,4" Click="OpenReleaseNotes_Click"/>
                                    <Button Content="Support" Style="{StaticResource ModernButton}"
                                            HorizontalAlignment="Left" Margin="0,4" Click="OpenSupport_Click"/>
                                </StackPanel>

                                <TextBlock Text="LEGAL" Style="{StaticResource SectionHeader}"/>

                                <TextBlock Text="Copyright &#x00A9; 2024 Fathom OS. All rights reserved."
                                           FontSize="11" Foreground="{DynamicResource SecondaryTextBrush}"
                                           Opacity="0.7"/>
                            </StackPanel>
                        </Grid>
                    </ScrollViewer>
                </Border>
            </Grid>
        </Grid>
    </Border>
</Window>
