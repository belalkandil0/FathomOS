<UserControl x:Class="FathomOS.Shell.Views.ToastNotification"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             MinWidth="320" MaxWidth="400"
             Opacity="0"
             RenderTransformOrigin="0.5,0.5"
             MouseLeftButtonDown="Toast_MouseLeftButtonDown"
             Cursor="Hand">

    <UserControl.RenderTransform>
        <TransformGroup>
            <TranslateTransform x:Name="SlideTransform" X="50"/>
            <ScaleTransform x:Name="ScaleTransform" ScaleX="0.95" ScaleY="0.95"/>
        </TransformGroup>
    </UserControl.RenderTransform>

    <UserControl.Resources>
        <!-- Slide In Animation -->
        <Storyboard x:Key="SlideInAnimation">
            <DoubleAnimation Storyboard.TargetProperty="Opacity"
                             From="0" To="1" Duration="0:0:0.3"
                             EasingFunction="{StaticResource EaseOut}"/>
            <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[0].(TranslateTransform.X)"
                             From="50" To="0" Duration="0:0:0.3"
                             EasingFunction="{StaticResource EaseOut}"/>
            <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[1].(ScaleTransform.ScaleX)"
                             From="0.95" To="1" Duration="0:0:0.3"
                             EasingFunction="{StaticResource EaseOut}"/>
            <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[1].(ScaleTransform.ScaleY)"
                             From="0.95" To="1" Duration="0:0:0.3"
                             EasingFunction="{StaticResource EaseOut}"/>
        </Storyboard>

        <!-- Slide Out Animation -->
        <Storyboard x:Key="SlideOutAnimation">
            <DoubleAnimation Storyboard.TargetProperty="Opacity"
                             From="1" To="0" Duration="0:0:0.25"
                             EasingFunction="{StaticResource EaseIn}"/>
            <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[0].(TranslateTransform.X)"
                             From="0" To="50" Duration="0:0:0.25"
                             EasingFunction="{StaticResource EaseIn}"/>
        </Storyboard>

        <!-- Hover Effect -->
        <Storyboard x:Key="HoverEnter">
            <DoubleAnimation Storyboard.TargetName="HoverOverlay"
                             Storyboard.TargetProperty="Opacity"
                             To="1" Duration="0:0:0.15"/>
        </Storyboard>

        <Storyboard x:Key="HoverLeave">
            <DoubleAnimation Storyboard.TargetName="HoverOverlay"
                             Storyboard.TargetProperty="Opacity"
                             To="0" Duration="0:0:0.15"/>
        </Storyboard>

        <!-- Easing Functions -->
        <QuadraticEase x:Key="EaseOut" EasingMode="EaseOut"/>
        <QuadraticEase x:Key="EaseIn" EasingMode="EaseIn"/>

        <!-- Type Colors -->
        <SolidColorBrush x:Key="SuccessColor" Color="#A6E3A1"/>
        <SolidColorBrush x:Key="ErrorColor" Color="#F38BA8"/>
        <SolidColorBrush x:Key="WarningColor" Color="#F9E2AF"/>
        <SolidColorBrush x:Key="InfoColor" Color="#89B4FA"/>
    </UserControl.Resources>

    <UserControl.Triggers>
        <EventTrigger RoutedEvent="UserControl.Loaded">
            <BeginStoryboard Storyboard="{StaticResource SlideInAnimation}"/>
        </EventTrigger>
        <EventTrigger RoutedEvent="Mouse.MouseEnter">
            <BeginStoryboard Storyboard="{StaticResource HoverEnter}"/>
        </EventTrigger>
        <EventTrigger RoutedEvent="Mouse.MouseLeave">
            <BeginStoryboard Storyboard="{StaticResource HoverLeave}"/>
        </EventTrigger>
    </UserControl.Triggers>

    <Border x:Name="MainBorder" CornerRadius="10" Margin="8">
        <Border.Background>
            <SolidColorBrush Color="#282A3A"/>
        </Border.Background>
        <Border.Effect>
            <DropShadowEffect BlurRadius="20" ShadowDepth="2" Opacity="0.4" Direction="270" Color="#000000"/>
        </Border.Effect>

        <Grid>
            <!-- Hover Overlay -->
            <Border x:Name="HoverOverlay" CornerRadius="10" Opacity="0"
                    Background="#20FFFFFF"/>

            <!-- Content -->
            <Grid Margin="14,12">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- Type Icon -->
                <Border x:Name="IconBorder" Grid.Column="0"
                        Width="36" Height="36"
                        CornerRadius="8"
                        VerticalAlignment="Top"
                        Margin="0,0,12,0">
                    <Border.Background>
                        <SolidColorBrush x:Name="IconBackground" Color="#89B4FA" Opacity="0.15"/>
                    </Border.Background>
                    <TextBlock x:Name="IconText" Text="i"
                               FontSize="18" FontWeight="Bold"
                               HorizontalAlignment="Center"
                               VerticalAlignment="Center">
                        <TextBlock.Foreground>
                            <SolidColorBrush x:Name="IconForeground" Color="#89B4FA"/>
                        </TextBlock.Foreground>
                    </TextBlock>
                </Border>

                <!-- Message Content -->
                <StackPanel Grid.Column="1" VerticalAlignment="Center">
                    <TextBlock x:Name="TxtTitle" Text="Notification"
                               FontSize="13" FontWeight="SemiBold"
                               Foreground="#CDD6F4"
                               TextWrapping="Wrap"
                               Visibility="Collapsed"/>
                    <TextBlock x:Name="TxtMessage" Text="This is a notification message"
                               FontSize="12"
                               Foreground="#BAC2DE"
                               TextWrapping="Wrap"
                               MaxWidth="280"/>
                </StackPanel>

                <!-- Close Button -->
                <Button x:Name="BtnClose" Grid.Column="2"
                        Width="24" Height="24"
                        Background="Transparent"
                        BorderThickness="0"
                        VerticalAlignment="Top"
                        Margin="8,0,0,0"
                        Cursor="Hand"
                        Click="CloseButton_Click"
                        ToolTip="Dismiss">
                    <Button.Template>
                        <ControlTemplate TargetType="Button">
                            <Border x:Name="CloseBorder" CornerRadius="12"
                                    Background="Transparent">
                                <TextBlock Text="X" FontSize="10" FontWeight="Bold"
                                           Foreground="#6C7086"
                                           HorizontalAlignment="Center"
                                           VerticalAlignment="Center"/>
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter TargetName="CloseBorder" Property="Background" Value="#40FFFFFF"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Button.Template>
                </Button>
            </Grid>

            <!-- Progress Bar (for timed auto-dismiss) -->
            <Border x:Name="ProgressContainer" VerticalAlignment="Bottom"
                    Height="3" CornerRadius="0,0,10,10"
                    ClipToBounds="True">
                <Border x:Name="ProgressIndicator"
                        HorizontalAlignment="Left"
                        Width="0"
                        CornerRadius="0,0,10,10">
                    <Border.Background>
                        <SolidColorBrush x:Name="ProgressColor" Color="#89B4FA" Opacity="0.5"/>
                    </Border.Background>
                </Border>
            </Border>

            <!-- Type Accent Line -->
            <Border x:Name="AccentLine" Width="4" HorizontalAlignment="Left"
                    CornerRadius="10,0,0,10">
                <Border.Background>
                    <SolidColorBrush x:Name="AccentColor" Color="#89B4FA"/>
                </Border.Background>
            </Border>
        </Grid>
    </Border>
</UserControl>
