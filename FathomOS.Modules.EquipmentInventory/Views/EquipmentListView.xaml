<UserControl x:Class="FathomOS.Modules.EquipmentInventory.Views.EquipmentListView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mah="http://metro.mahapps.com/winfx/xaml/controls"
             xmlns:iconPacks="http://metro.mahapps.com/winfx/xaml/iconpacks"
             xmlns:converters="clr-namespace:FathomOS.Modules.EquipmentInventory.Converters">
    
    <UserControl.Resources>
        <converters:StatusToColorConverter x:Key="StatusToColor"/>
        <converters:BoolToVisibilityConverter x:Key="BoolToVisibility"/>
        <converters:InverseBoolToVisibilityConverter x:Key="InverseBoolToVisibility"/>
        <converters:NullToVisibilityConverter x:Key="NullToVisibility"/>
    </UserControl.Resources>
    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        
        <!-- Header -->
        <Grid Grid.Row="0" Margin="0,0,0,20">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            
            <StackPanel>
                <TextBlock Text="Equipment" Style="{DynamicResource HeadingLarge}" Margin="0,0,0,5"/>
                <TextBlock Text="Manage all equipment items across locations" 
                           Foreground="{DynamicResource TextSecondaryBrush}" FontSize="14"/>
            </StackPanel>
            
            <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center">
                <Button Style="{DynamicResource SecondaryButton}" Margin="0,0,10,0"
                        Command="{Binding RefreshCommand}" ToolTip="Refresh">
                    <iconPacks:PackIconMaterial Kind="Refresh" Width="16" Height="16"/>
                </Button>
                <Button Style="{DynamicResource SecondaryButton}" Margin="0,0,10,0"
                        Command="{Binding ViewFavoritesCommand}" ToolTip="Favorites &amp; Recent">
                    <iconPacks:PackIconMaterial Kind="StarOutline" Width="16" Height="16"/>
                </Button>
                <Button Style="{DynamicResource SecondaryButton}" Margin="0,0,10,0"
                        Command="{Binding CreateFromTemplateCommand}" ToolTip="Create from Template">
                    <iconPacks:PackIconMaterial Kind="FileDocumentOutline" Width="16" Height="16"/>
                </Button>
                <Button Style="{DynamicResource SecondaryButton}" Margin="0,0,10,0"
                        Command="{Binding ToggleSelectionModeCommand}" ToolTip="Batch Selection Mode">
                    <iconPacks:PackIconMaterial Kind="CheckboxMultipleMarkedOutline" Width="16" Height="16"/>
                </Button>
                <Button Style="{DynamicResource SecondaryButton}" Margin="0,0,10,0"
                        Command="{Binding ImportCommand}" ToolTip="Import from Excel">
                    <StackPanel Orientation="Horizontal">
                        <iconPacks:PackIconMaterial Kind="Import" Width="16" Height="16" VerticalAlignment="Center" Margin="0,0,8,0"/>
                        <TextBlock Text="Import"/>
                    </StackPanel>
                </Button>
                <Button Style="{DynamicResource SecondaryButton}" Margin="0,0,10,0"
                        Command="{Binding ExportEquipmentExcelCommand}">
                    <StackPanel Orientation="Horizontal">
                        <iconPacks:PackIconMaterial Kind="Export" Width="16" Height="16" VerticalAlignment="Center" Margin="0,0,8,0"/>
                        <TextBlock Text="Export"/>
                    </StackPanel>
                </Button>
                <Button Style="{DynamicResource PrimaryButton}" Command="{Binding NewEquipmentCommand}">
                    <StackPanel Orientation="Horizontal">
                        <iconPacks:PackIconMaterial Kind="Plus" Width="16" Height="16" VerticalAlignment="Center" Margin="0,0,8,0"/>
                        <TextBlock Text="Add Equipment"/>
                    </StackPanel>
                </Button>
            </StackPanel>
        </Grid>
        
        <!-- Batch Actions Toolbar (shown when selection mode is active) -->
        <Border Grid.Row="1" Margin="0,0,0,15"
                Visibility="{Binding IsSelectionMode, Converter={StaticResource BoolToVisibility}}">
            <Border Background="{DynamicResource AccentBrush}" CornerRadius="8" Padding="15,10">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    
                    <!-- Selection Info -->
                    <StackPanel Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center">
                        <CheckBox Foreground="White" Margin="0,0,15,0"
                                  IsChecked="{Binding SelectAll, Mode=TwoWay}"
                                  ToolTip="Select All"/>
                        <TextBlock Text="{Binding SelectionSummary}" 
                                   Foreground="White" FontWeight="SemiBold" FontSize="14"
                                   VerticalAlignment="Center"/>
                    </StackPanel>
                    
                    <!-- Actions -->
                    <StackPanel Grid.Column="1" Orientation="Horizontal" Margin="20,0,0,0">
                        <Button Content="Move" Background="Transparent" BorderThickness="0" Foreground="White"
                                Command="{Binding BatchUpdateLocationCommand}" ToolTip="Move to Location" Padding="10,5">
                            <Button.Style>
                                <Style TargetType="Button" BasedOn="{StaticResource {x:Type Button}}">
                                    <Setter Property="Background" Value="Transparent"/>
                                    <Setter Property="BorderThickness" Value="0"/>
                                </Style>
                            </Button.Style>
                        </Button>
                        <Button Content="Print Labels" Background="Transparent" BorderThickness="0" Foreground="White"
                                Command="{Binding BatchPrintLabelsCommand}" ToolTip="Print QR Labels" Padding="10,5"/>
                        <Button Content="Export Labels" Background="Transparent" BorderThickness="0" Foreground="White"
                                Command="{Binding BatchExportLabelsCommand}" ToolTip="Export Labels to PDF" Padding="10,5"/>
                        <Button Content="Delete" Background="Transparent" BorderThickness="0" Foreground="White"
                                Command="{Binding BatchDeleteCommand}" ToolTip="Delete Selected" Padding="10,5"/>
                    </StackPanel>
                    
                    <!-- Close -->
                    <Button Grid.Column="3" Background="Transparent" BorderThickness="0"
                            Command="{Binding ToggleSelectionModeCommand}" ToolTip="Exit Selection Mode" Padding="10,5">
                        <iconPacks:PackIconMaterial Kind="Close" Width="16" Height="16" Foreground="White"/>
                    </Button>
                </Grid>
            </Border>
        </Border>
        
        <!-- Main Content -->
        <Grid Grid.Row="2">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" MinWidth="400"/>
                <ColumnDefinition Width="380"/>
            </Grid.ColumnDefinitions>
            
            <!-- Equipment List -->
            <Border Grid.Column="0" Style="{DynamicResource CardBorder}" Margin="0,0,15,0" Padding="0">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    
                    <!-- Search & Filter Bar -->
                    <Border Grid.Row="0" Background="{DynamicResource SurfaceBrush}" Padding="15" 
                            CornerRadius="12,12,0,0">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            
                            <!-- Search Box -->
                            <Border Grid.Column="0" Background="{DynamicResource CardBrush}" CornerRadius="8" 
                                    Padding="12,0" Margin="0,0,15,0">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <iconPacks:PackIconMaterial Kind="Magnify" Width="16" Height="16" 
                                                                Foreground="{DynamicResource TextSecondaryBrush}" 
                                                                VerticalAlignment="Center" Margin="0,0,10,0"/>
                                    <TextBox Grid.Column="1" Text="{Binding SearchText, UpdateSourceTrigger=PropertyChanged, Delay=300}"
                                             Background="Transparent" BorderThickness="0" FontSize="13"
                                             Foreground="{DynamicResource TextPrimaryBrush}" VerticalAlignment="Center"
                                             mah:TextBoxHelper.Watermark="Search by name, asset #, serial..."/>
                                </Grid>
                            </Border>
                            
                            <!-- Category Filter -->
                            <ComboBox Grid.Column="1" ItemsSource="{Binding Categories}" SelectedItem="{Binding SelectedCategory}"
                                      DisplayMemberPath="Name" Width="150" Margin="0,0,10,0"
                                      mah:TextBoxHelper.Watermark="Category"/>
                            
                            <!-- Status Filter -->
                            <ComboBox Grid.Column="2" ItemsSource="{Binding StatusOptions}" SelectedItem="{Binding SelectedStatusFilter}"
                                      Width="130" Margin="0,0,10,0"
                                      mah:TextBoxHelper.Watermark="Status"/>
                            
                            <!-- Clear Filters -->
                            <Button Grid.Column="3" Style="{DynamicResource IconButton}" ToolTip="Clear Filters"
                                    Command="{Binding ClearFiltersCommand}">
                                <iconPacks:PackIconMaterial Kind="FilterRemove" Width="16" Height="16"/>
                            </Button>
                        </Grid>
                    </Border>
                    
                    <!-- Results Count -->
                    <Border Grid.Row="1" Background="{DynamicResource BackgroundBrush}" Padding="15,10">
                        <TextBlock Foreground="{DynamicResource TextSecondaryBrush}" FontSize="13">
                            <Run Text="{Binding Equipment.Count, Mode=OneWay}"/>
                            <Run Text="items found"/>
                        </TextBlock>
                    </Border>
                    
                    <!-- Equipment List -->
                    <ListBox Grid.Row="2" ItemsSource="{Binding Equipment}" 
                             SelectedItem="{Binding SelectedEquipment}"
                             Background="Transparent" BorderThickness="0"
                             ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                             VirtualizingPanel.IsVirtualizing="True"
                             VirtualizingPanel.VirtualizationMode="Recycling">
                        <ListBox.ItemContainerStyle>
                            <Style TargetType="ListBoxItem">
                                <Setter Property="Padding" Value="15,12"/>
                                <Setter Property="Margin" Value="0"/>
                                <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="ListBoxItem">
                                            <Border x:Name="border" Background="Transparent" 
                                                    BorderThickness="0,0,0,1" BorderBrush="{DynamicResource BorderBrush}"
                                                    Padding="{TemplateBinding Padding}">
                                                <ContentPresenter/>
                                            </Border>
                                            <ControlTemplate.Triggers>
                                                <Trigger Property="IsSelected" Value="True">
                                                    <Setter TargetName="border" Property="Background" Value="{DynamicResource SurfaceBrush}"/>
                                                </Trigger>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter TargetName="border" Property="Background" Value="{DynamicResource CardBrush}"/>
                                                </Trigger>
                                            </ControlTemplate.Triggers>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </ListBox.ItemContainerStyle>
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    
                                    <StackPanel Grid.Column="0">
                                        <!-- Name & Asset Number -->
                                        <TextBlock Text="{Binding Name}" FontSize="14" FontWeight="SemiBold"
                                                   Foreground="{DynamicResource TextPrimaryBrush}"
                                                   TextTrimming="CharacterEllipsis"/>
                                        <StackPanel Orientation="Horizontal" Margin="0,4,0,0">
                                            <TextBlock Text="{Binding AssetNumber}" FontSize="12" FontFamily="Consolas"
                                                       Foreground="{DynamicResource AccentBrush}" Margin="0,0,15,0"/>
                                            <TextBlock Text="{Binding Category.Name}" FontSize="12"
                                                       Foreground="{DynamicResource TextSecondaryBrush}"/>
                                        </StackPanel>
                                        <!-- Location -->
                                        <StackPanel Orientation="Horizontal" Margin="0,6,0,0">
                                            <iconPacks:PackIconMaterial Kind="MapMarkerOutline" Width="12" Height="12" 
                                                                        Foreground="{DynamicResource TextSecondaryBrush}" 
                                                                        VerticalAlignment="Center" Margin="0,0,5,0"/>
                                            <TextBlock Text="{Binding CurrentLocation.Name, FallbackValue='No Location'}" 
                                                       FontSize="12" Foreground="{DynamicResource TextSecondaryBrush}"/>
                                        </StackPanel>
                                    </StackPanel>
                                    
                                    <!-- Status Badge -->
                                    <Border Grid.Column="1" Background="{Binding Status, Converter={StaticResource StatusToColor}}" 
                                            CornerRadius="4" Padding="10,5" VerticalAlignment="Center">
                                        <TextBlock Text="{Binding StatusDisplay}" Foreground="White" FontSize="11" FontWeight="SemiBold"/>
                                    </Border>
                                </Grid>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                    </ListBox>
                    
                    <!-- Empty State -->
                    <StackPanel Grid.Row="2" VerticalAlignment="Center" HorizontalAlignment="Center"
                                Visibility="{Binding Equipment.Count, Converter={StaticResource InverseBoolToVisibility}}">
                        <iconPacks:PackIconMaterial Kind="PackageVariantClosed" Width="64" Height="64" 
                                                    Foreground="{DynamicResource TextSecondaryBrush}" 
                                                    HorizontalAlignment="Center" Opacity="0.3"/>
                        <TextBlock Text="No equipment found" FontSize="16" FontWeight="SemiBold"
                                   Foreground="{DynamicResource TextSecondaryBrush}" 
                                   HorizontalAlignment="Center" Margin="0,20,0,5"/>
                        <TextBlock Text="Add new equipment or adjust your filters" FontSize="13"
                                   Foreground="{DynamicResource TextSecondaryBrush}" 
                                   HorizontalAlignment="Center" Opacity="0.7"/>
                    </StackPanel>
                </Grid>
            </Border>
            
            <!-- Details Panel -->
            <Border Grid.Column="1" Style="{DynamicResource CardBorder}" Padding="0">
                <Grid>
                    <!-- Details Content -->
                    <ScrollViewer VerticalScrollBarVisibility="Auto" 
                                  Visibility="{Binding HasSelectedEquipment, Converter={StaticResource BoolToVisibility}}">
                        <StackPanel>
                            <!-- Header with Photo Placeholder -->
                            <Border Background="{DynamicResource SurfaceBrush}" Padding="20" CornerRadius="12,12,0,0">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    
                                    <!-- Equipment Icon -->
                                    <Border Width="60" Height="60" CornerRadius="12" Margin="0,0,15,0"
                                            Background="{DynamicResource CardBrush}">
                                        <iconPacks:PackIconMaterial Kind="PackageVariantClosed" Width="28" Height="28"
                                                                    Foreground="{DynamicResource AccentBrush}"
                                                                    HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                    </Border>
                                    
                                    <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                        <TextBlock Text="{Binding SelectedEquipment.Name}" FontSize="18" FontWeight="SemiBold"
                                                   Foreground="{DynamicResource TextPrimaryBrush}" TextWrapping="Wrap"/>
                                        <TextBlock Text="{Binding SelectedEquipment.AssetNumber}" FontSize="14" FontFamily="Consolas"
                                                   Foreground="{DynamicResource AccentBrush}" Margin="0,4,0,0"/>
                                    </StackPanel>
                                </Grid>
                            </Border>
                            
                            <!-- Status -->
                            <Border Padding="20,15">
                                <Border Background="{Binding SelectedEquipment.Status, Converter={StaticResource StatusToColor}}"
                                        CornerRadius="8" Padding="15,10" HorizontalAlignment="Left">
                                    <StackPanel Orientation="Horizontal">
                                        <iconPacks:PackIconMaterial Kind="CheckCircle" Width="16" Height="16" 
                                                                    Foreground="White" VerticalAlignment="Center" Margin="0,0,8,0"/>
                                        <TextBlock Text="{Binding SelectedEquipment.StatusDisplay}" Foreground="White" 
                                                   FontWeight="SemiBold" FontSize="13"/>
                                    </StackPanel>
                                </Border>
                            </Border>
                            
                            <!-- Details Grid -->
                            <StackPanel Margin="20,0,20,20">
                                <!-- Unique ID -->
                                <Border Background="{DynamicResource SurfaceBrush}" CornerRadius="8" Padding="15" Margin="0,0,0,15"
                                        Visibility="{Binding SelectedEquipment.UniqueId, Converter={StaticResource NullToVisibility}}">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <StackPanel>
                                            <TextBlock Text="UNIQUE ID" FontSize="10" FontWeight="SemiBold" 
                                                       Foreground="{DynamicResource TextSecondaryBrush}" Opacity="0.7"/>
                                            <TextBlock Text="{Binding SelectedEquipment.UniqueId}" FontSize="16" FontWeight="Bold"
                                                       FontFamily="Consolas" Foreground="{DynamicResource TextPrimaryBrush}" Margin="0,4,0,0"/>
                                        </StackPanel>
                                        <Button Grid.Column="1" Style="{DynamicResource IconButton}" ToolTip="Copy ID"
                                                Command="{Binding CopyUniqueIdCommand}">
                                            <iconPacks:PackIconMaterial Kind="ContentCopy" Width="14" Height="14"/>
                                        </Button>
                                    </Grid>
                                </Border>
                                
                                <!-- Location -->
                                <TextBlock Text="LOCATION" FontSize="10" FontWeight="SemiBold" 
                                           Foreground="{DynamicResource TextSecondaryBrush}" Opacity="0.7" Margin="0,0,0,6"/>
                                <TextBlock Text="{Binding SelectedEquipment.CurrentLocation.Name, FallbackValue='Not Assigned'}" 
                                           FontSize="14" Foreground="{DynamicResource TextPrimaryBrush}" Margin="0,0,0,15"/>
                                
                                <!-- Category -->
                                <TextBlock Text="CATEGORY" FontSize="10" FontWeight="SemiBold" 
                                           Foreground="{DynamicResource TextSecondaryBrush}" Opacity="0.7" Margin="0,0,0,6"/>
                                <TextBlock Text="{Binding SelectedEquipment.Category.Name, FallbackValue='Uncategorized'}" 
                                           FontSize="14" Foreground="{DynamicResource TextPrimaryBrush}" Margin="0,0,0,15"/>
                                
                                <!-- Manufacturer & Model Row -->
                                <Grid Margin="0,0,0,15">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <StackPanel Grid.Column="0" Margin="0,0,10,0">
                                        <TextBlock Text="MANUFACTURER" FontSize="10" FontWeight="SemiBold" 
                                                   Foreground="{DynamicResource TextSecondaryBrush}" Opacity="0.7" Margin="0,0,0,6"/>
                                        <TextBlock Text="{Binding SelectedEquipment.Manufacturer, FallbackValue='-'}" 
                                                   FontSize="14" Foreground="{DynamicResource TextPrimaryBrush}"/>
                                    </StackPanel>
                                    <StackPanel Grid.Column="1">
                                        <TextBlock Text="MODEL" FontSize="10" FontWeight="SemiBold" 
                                                   Foreground="{DynamicResource TextSecondaryBrush}" Opacity="0.7" Margin="0,0,0,6"/>
                                        <TextBlock Text="{Binding SelectedEquipment.Model, FallbackValue='-'}" 
                                                   FontSize="14" Foreground="{DynamicResource TextPrimaryBrush}"/>
                                    </StackPanel>
                                </Grid>
                                
                                <!-- Serial Number -->
                                <TextBlock Text="SERIAL NUMBER" FontSize="10" FontWeight="SemiBold" 
                                           Foreground="{DynamicResource TextSecondaryBrush}" Opacity="0.7" Margin="0,0,0,6"/>
                                <TextBlock Text="{Binding SelectedEquipment.SerialNumber, FallbackValue='-'}" 
                                           FontSize="14" FontFamily="Consolas" Foreground="{DynamicResource TextPrimaryBrush}" Margin="0,0,0,15"/>
                                
                                <!-- Certification Status -->
                                <TextBlock Text="CERTIFICATION" FontSize="10" FontWeight="SemiBold" 
                                           Foreground="{DynamicResource TextSecondaryBrush}" Opacity="0.7" Margin="0,0,0,6"/>
                                <Border Background="{DynamicResource SurfaceBrush}" CornerRadius="8" Padding="12" Margin="0,0,0,15">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <iconPacks:PackIconMaterial Kind="CertificateOutline" Width="20" Height="20"
                                                                    Foreground="{DynamicResource AccentBrush}" 
                                                                    VerticalAlignment="Center" Margin="0,0,12,0"/>
                                        <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                            <TextBlock Text="{Binding SelectedEquipment.CertificationExpiryDate, StringFormat='Expires: {0:MMM d, yyyy}', FallbackValue='No certification'}" 
                                                       FontSize="13" Foreground="{DynamicResource TextPrimaryBrush}"/>
                                        </StackPanel>
                                    </Grid>
                                </Border>
                                
                                <!-- Separator -->
                                <Border Height="1" Background="{DynamicResource BorderBrush}" Margin="0,5,0,20"/>
                                
                                <!-- Action Buttons -->
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>
                                    
                                    <Button Grid.Column="0" Grid.Row="0" Style="{DynamicResource PrimaryButton}" 
                                            Command="{Binding EditEquipmentCommand}" Margin="0,0,5,10">
                                        <StackPanel Orientation="Horizontal">
                                            <iconPacks:PackIconMaterial Kind="Pencil" Width="14" Height="14" Margin="0,0,8,0"/>
                                            <TextBlock Text="Edit"/>
                                        </StackPanel>
                                    </Button>
                                    
                                    <Button Grid.Column="1" Grid.Row="0" Style="{DynamicResource SecondaryButton}" 
                                            Command="{Binding ToggleFavoriteCommand}" Margin="5,0,0,10">
                                        <StackPanel Orientation="Horizontal">
                                            <iconPacks:PackIconMaterial Kind="StarOutline" Width="14" Height="14" Margin="0,0,8,0"/>
                                            <TextBlock Text="Favorite"/>
                                        </StackPanel>
                                    </Button>
                                    
                                    <Button Grid.Column="0" Grid.Row="1" Style="{DynamicResource SecondaryButton}" 
                                            Command="{Binding DuplicateEquipmentCommand}" Margin="0,0,5,10">
                                        <StackPanel Orientation="Horizontal">
                                            <iconPacks:PackIconMaterial Kind="ContentCopy" Width="14" Height="14" Margin="0,0,8,0"/>
                                            <TextBlock Text="Duplicate"/>
                                        </StackPanel>
                                    </Button>
                                    
                                    <Button Grid.Column="1" Grid.Row="1" Style="{DynamicResource SecondaryButton}" 
                                            Command="{Binding SaveAsTemplateCommand}" Margin="5,0,0,10">
                                        <StackPanel Orientation="Horizontal">
                                            <iconPacks:PackIconMaterial Kind="ContentSaveOutline" Width="14" Height="14" Margin="0,0,8,0"/>
                                            <TextBlock Text="Template"/>
                                        </StackPanel>
                                    </Button>
                                    
                                    <Button Grid.Column="0" Grid.Row="2" Style="{DynamicResource SecondaryButton}" 
                                            Command="{Binding ViewHistoryCommand}" Margin="0,0,5,0">
                                        <StackPanel Orientation="Horizontal">
                                            <iconPacks:PackIconMaterial Kind="History" Width="14" Height="14" Margin="0,0,8,0"/>
                                            <TextBlock Text="History"/>
                                        </StackPanel>
                                    </Button>
                                    
                                    <Button Grid.Column="1" Grid.Row="2" Style="{DynamicResource SecondaryButton}" 
                                            Command="{Binding DeleteEquipmentCommand}" Margin="5,0,0,0"
                                            Foreground="#E53935">
                                        <StackPanel Orientation="Horizontal">
                                            <iconPacks:PackIconMaterial Kind="Delete" Width="14" Height="14" Margin="0,0,8,0"/>
                                            <TextBlock Text="Delete"/>
                                        </StackPanel>
                                    </Button>
                                </Grid>
                            </StackPanel>
                        </StackPanel>
                    </ScrollViewer>
                    
                    <!-- Empty State -->
                    <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center"
                                Visibility="{Binding HasSelectedEquipment, Converter={StaticResource InverseBoolToVisibility}}">
                        <Border Width="80" Height="80" CornerRadius="40" Background="{DynamicResource SurfaceBrush}"
                                HorizontalAlignment="Center" Margin="0,0,0,20">
                            <iconPacks:PackIconMaterial Kind="PackageVariantClosed" Width="36" Height="36" 
                                                        Foreground="{DynamicResource TextSecondaryBrush}" 
                                                        HorizontalAlignment="Center" VerticalAlignment="Center" Opacity="0.5"/>
                        </Border>
                        <TextBlock Text="Select Equipment" FontSize="16" FontWeight="SemiBold"
                                   Foreground="{DynamicResource TextSecondaryBrush}" 
                                   HorizontalAlignment="Center"/>
                        <TextBlock Text="Click an item to view details" FontSize="13"
                                   Foreground="{DynamicResource TextSecondaryBrush}" 
                                   HorizontalAlignment="Center" Margin="0,8,0,0" Opacity="0.7"/>
                    </StackPanel>
                </Grid>
            </Border>
        </Grid>
    </Grid>
</UserControl>
