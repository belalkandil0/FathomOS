<mah:MetroWindow x:Class="FathomOS.Modules.EquipmentInventory.Views.LoginWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:mah="http://metro.mahapps.com/winfx/xaml/controls"
        xmlns:iconPacks="http://metro.mahapps.com/winfx/xaml/iconpacks"
        Title="Fathom OS - Equipment &amp; Inventory"
        Height="680" Width="480"
        WindowStartupLocation="CenterScreen"
        ResizeMode="NoResize"
        ShowTitleBar="False"
        ShowCloseButton="False"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent">
    
    <Window.Resources>
        <!-- Modern Input Style -->
        <Style x:Key="ModernInput" TargetType="TextBox">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="CaretBrush" Value="White"/>
            <Setter Property="BorderThickness" Value="0,0,0,2"/>
            <Setter Property="BorderBrush" Value="#40FFFFFF"/>
            <Setter Property="Padding" Value="0,8"/>
            <Setter Property="FontSize" Value="15"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Style.Triggers>
                <Trigger Property="IsFocused" Value="True">
                    <Setter Property="BorderBrush" Value="#00D4AA"/>
                </Trigger>
            </Style.Triggers>
        </Style>
        
        <Style x:Key="ModernPasswordInput" TargetType="PasswordBox">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="CaretBrush" Value="White"/>
            <Setter Property="BorderThickness" Value="0,0,0,2"/>
            <Setter Property="BorderBrush" Value="#40FFFFFF"/>
            <Setter Property="Padding" Value="0,8"/>
            <Setter Property="FontSize" Value="15"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Style.Triggers>
                <Trigger Property="IsFocused" Value="True">
                    <Setter Property="BorderBrush" Value="#00D4AA"/>
                </Trigger>
            </Style.Triggers>
        </Style>
        
        <!-- Gradient Button -->
        <Style x:Key="GradientButton" TargetType="Button">
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontSize" Value="15"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border" CornerRadius="25" Padding="30,14">
                            <Border.Background>
                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                    <GradientStop Color="#00D4AA" Offset="0"/>
                                    <GradientStop Color="#00B4D8" Offset="1"/>
                                </LinearGradientBrush>
                            </Border.Background>
                            <Border.Effect>
                                <DropShadowEffect ShadowDepth="0" BlurRadius="20" Opacity="0.4" Color="#00D4AA"/>
                            </Border.Effect>
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background">
                                    <Setter.Value>
                                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                            <GradientStop Color="#00E4BA" Offset="0"/>
                                            <GradientStop Color="#00C4E8" Offset="1"/>
                                        </LinearGradientBrush>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="border" Property="Background">
                                    <Setter.Value>
                                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                            <GradientStop Color="#00C49A" Offset="0"/>
                                            <GradientStop Color="#00A4C8" Offset="1"/>
                                        </LinearGradientBrush>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter TargetName="border" Property="Background" Value="#404050"/>
                                <Setter Property="Foreground" Value="#808090"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>
    
    <!-- Main Container with glass effect -->
    <Border CornerRadius="20" ClipToBounds="True">
        <Border.Effect>
            <DropShadowEffect ShadowDepth="0" BlurRadius="40" Opacity="0.5" Color="Black"/>
        </Border.Effect>
        <Border.Background>
            <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                <GradientStop Color="#0D1B2A" Offset="0"/>
                <GradientStop Color="#1B263B" Offset="0.5"/>
                <GradientStop Color="#0D1B2A" Offset="1"/>
            </LinearGradientBrush>
        </Border.Background>
        
        <Grid>
            <!-- Decorative circles - not clickable -->
            <Ellipse Width="300" Height="300" Opacity="0.03" Fill="#00D4AA"
                     HorizontalAlignment="Right" VerticalAlignment="Top" Margin="0,-100,-100,0"
                     IsHitTestVisible="False"/>
            <Ellipse Width="200" Height="200" Opacity="0.03" Fill="#00B4D8"
                     HorizontalAlignment="Left" VerticalAlignment="Bottom" Margin="-50,-50,0,0"
                     IsHitTestVisible="False"/>
            
            <!-- Close Button - must be above decorative elements -->
            <Button x:Name="CloseButton" Click="CloseButton_Click"
                    HorizontalAlignment="Right" VerticalAlignment="Top"
                    Margin="0,20,20,0" Width="36" Height="36"
                    Background="Transparent" BorderThickness="0" Cursor="Hand"
                    ToolTip="Close" Panel.ZIndex="100">
                <Button.Template>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border" Background="#20FFFFFF" CornerRadius="18">
                            <iconPacks:PackIconMaterial Kind="Close" Width="14" Height="14" 
                                                        Foreground="#90FFFFFF" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#20FFFFFF"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Button.Template>
            </Button>
            
            <!-- Drag Region -->
            <Border Height="60" VerticalAlignment="Top" Background="Transparent" MouseLeftButtonDown="DragWindow"/>
            
            <StackPanel VerticalAlignment="Center" Margin="50,30">
                
                <!-- Logo -->
                <Grid Width="100" Height="100" Margin="0,0,0,25" HorizontalAlignment="Center">
                    <Ellipse Fill="#15202B">
                        <Ellipse.Effect>
                            <DropShadowEffect ShadowDepth="0" BlurRadius="30" Opacity="0.3" Color="#00D4AA"/>
                        </Ellipse.Effect>
                    </Ellipse>
                    <Border CornerRadius="50" BorderThickness="2">
                        <Border.BorderBrush>
                            <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                <GradientStop Color="#00D4AA" Offset="0"/>
                                <GradientStop Color="#00B4D8" Offset="1"/>
                            </LinearGradientBrush>
                        </Border.BorderBrush>
                    </Border>
                    <iconPacks:PackIconMaterial Kind="PackageVariantClosed" Width="45" Height="45" 
                                                HorizontalAlignment="Center" VerticalAlignment="Center">
                        <iconPacks:PackIconMaterial.Foreground>
                            <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                <GradientStop Color="#00D4AA" Offset="0"/>
                                <GradientStop Color="#00B4D8" Offset="1"/>
                            </LinearGradientBrush>
                        </iconPacks:PackIconMaterial.Foreground>
                    </iconPacks:PackIconMaterial>
                </Grid>
                
                <!-- Title -->
                <TextBlock Text="FATHOM OS" FontSize="26" FontWeight="Bold" 
                           Foreground="White" HorizontalAlignment="Center" Margin="0,0,0,4"
                           FontFamily="Segoe UI"/>
                <TextBlock Text="Equipment &amp; Inventory Management" FontSize="12" 
                           Foreground="#60FFFFFF" HorizontalAlignment="Center" Margin="0,0,0,40"/>
                
                <!-- Username Field -->
                <StackPanel Margin="0,0,0,25">
                    <TextBlock Text="USERNAME" FontSize="11" Foreground="#60FFFFFF" 
                               Margin="0,0,0,8" FontWeight="SemiBold"/>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <iconPacks:PackIconMaterial Kind="AccountOutline" Width="20" Height="20" 
                                                    Foreground="#50FFFFFF" VerticalAlignment="Center" Margin="0,0,12,0"/>
                        <TextBox x:Name="UsernameTextBox" Grid.Column="1" Style="{StaticResource ModernInput}"
                                 KeyDown="Input_KeyDown"/>
                    </Grid>
                </StackPanel>
                
                <!-- Password Field -->
                <StackPanel Margin="0,0,0,20">
                    <TextBlock Text="PASSWORD" FontSize="11" Foreground="#60FFFFFF" 
                               Margin="0,0,0,8" FontWeight="SemiBold"/>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <iconPacks:PackIconMaterial Kind="LockOutline" Width="20" Height="20" 
                                                    Foreground="#50FFFFFF" VerticalAlignment="Center" Margin="0,0,12,0"/>
                        <PasswordBox x:Name="PasswordBox" Grid.Column="1" Style="{StaticResource ModernPasswordInput}"
                                     KeyDown="Input_KeyDown"/>
                    </Grid>
                </StackPanel>
                
                <!-- Remember Me -->
                <CheckBox x:Name="RememberMeCheckBox" Margin="0,0,0,30">
                    <CheckBox.Template>
                        <ControlTemplate TargetType="CheckBox">
                            <StackPanel Orientation="Horizontal" Cursor="Hand">
                                <Border x:Name="checkBorder" Width="20" Height="20" CornerRadius="4"
                                        BorderThickness="2" BorderBrush="#40FFFFFF" Background="Transparent"
                                        VerticalAlignment="Center">
                                    <iconPacks:PackIconMaterial x:Name="checkMark" Kind="Check" 
                                                                Width="12" Height="12" Foreground="#00D4AA"
                                                                HorizontalAlignment="Center" VerticalAlignment="Center"
                                                                Visibility="Collapsed"/>
                                </Border>
                                <TextBlock Text="Remember me" Foreground="#80FFFFFF" FontSize="13" 
                                           VerticalAlignment="Center" Margin="10,0,0,0"/>
                            </StackPanel>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsChecked" Value="True">
                                    <Setter TargetName="checkMark" Property="Visibility" Value="Visible"/>
                                    <Setter TargetName="checkBorder" Property="BorderBrush" Value="#00D4AA"/>
                                </Trigger>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter TargetName="checkBorder" Property="BorderBrush" Value="#60FFFFFF"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </CheckBox.Template>
                </CheckBox>
                
                <!-- Sign In Button -->
                <Button x:Name="LoginButton" Content="SIGN IN" Style="{StaticResource GradientButton}"
                        Click="LoginButton_Click" HorizontalAlignment="Stretch"/>
                
                <!-- Error Message -->
                <Border x:Name="ErrorBorder" Visibility="Collapsed" 
                        Background="#20FF6B6B" CornerRadius="10" Padding="15,12" Margin="0,20,0,0">
                    <StackPanel Orientation="Horizontal">
                        <iconPacks:PackIconMaterial Kind="AlertCircleOutline" Foreground="#FF6B6B" 
                                                    Width="18" Height="18" VerticalAlignment="Center" Margin="0,0,12,0"/>
                        <TextBlock x:Name="ErrorText" Foreground="#FF6B6B" FontSize="13" 
                                   VerticalAlignment="Center" TextWrapping="Wrap"/>
                    </StackPanel>
                </Border>
                
                <!-- Divider -->
                <Grid Margin="0,30,0,25">
                    <Border Height="1" Background="#20FFFFFF" VerticalAlignment="Center"/>
                    <Border Background="#0D1B2A" HorizontalAlignment="Center" Padding="15,0">
                        <TextBlock Text="OR" Foreground="#40FFFFFF" FontSize="11" FontWeight="SemiBold"/>
                    </Border>
                </Grid>
                
                <!-- PIN Login -->
                <Button x:Name="PinLoginButton" Click="PinLogin_Click" Cursor="Hand" HorizontalAlignment="Center">
                    <Button.Template>
                        <ControlTemplate TargetType="Button">
                            <Border x:Name="border" CornerRadius="20" Padding="25,12"
                                    Background="Transparent" BorderThickness="1" BorderBrush="#30FFFFFF">
                                <StackPanel Orientation="Horizontal">
                                    <iconPacks:PackIconMaterial Kind="Dialpad" Width="18" Height="18" 
                                                                Foreground="#70FFFFFF" VerticalAlignment="Center" Margin="0,0,10,0"/>
                                    <TextBlock Text="Sign in with PIN" Foreground="#90FFFFFF" FontSize="13" VerticalAlignment="Center"/>
                                </StackPanel>
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter TargetName="border" Property="Background" Value="#10FFFFFF"/>
                                    <Setter TargetName="border" Property="BorderBrush" Value="#50FFFFFF"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Button.Template>
                </Button>
                
                <!-- Version -->
                <TextBlock Text="v1.0.0" FontSize="11" Foreground="#30FFFFFF" 
                           HorizontalAlignment="Center" Margin="0,35,0,0"/>
                
            </StackPanel>
            
            <!-- Loading Overlay -->
            <Border x:Name="LoadingOverlay" Visibility="Collapsed" Background="#E0000000" CornerRadius="20">
                <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                    <mah:ProgressRing IsActive="True" Width="50" Height="50" Foreground="#00D4AA"/>
                    <TextBlock Text="Signing in..." Foreground="White" Margin="0,20,0,0" FontSize="14"/>
                </StackPanel>
            </Border>
        </Grid>
    </Border>
</mah:MetroWindow>
