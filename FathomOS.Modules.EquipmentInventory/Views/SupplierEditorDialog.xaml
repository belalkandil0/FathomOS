<mah:MetroWindow x:Class="FathomOS.Modules.EquipmentInventory.Views.SupplierEditorDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:mah="http://metro.mahapps.com/winfx/xaml/controls"
        xmlns:iconPacks="http://metro.mahapps.com/winfx/xaml/iconpacks"
        Title="{Binding WindowTitle}"
        Height="550" Width="500"
        WindowStartupLocation="CenterOwner"
        ShowInTaskbar="False"
        ResizeMode="NoResize"
        Background="{DynamicResource BackgroundBrush}"
        BorderBrush="{DynamicResource AccentBrush}"
        BorderThickness="1">
    
    <mah:MetroWindow.Resources>
        <BooleanToVisibilityConverter x:Key="BoolToVisibility"/>
    </mah:MetroWindow.Resources>
    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        
        <!-- Content -->
        <ScrollViewer Grid.Row="0" VerticalScrollBarVisibility="Auto" Padding="25">
            <StackPanel>
                <!-- Header with Icon -->
                <Grid Margin="0,0,0,25">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    
                    <Border Width="56" Height="56" CornerRadius="12" Margin="0,0,15,0">
                        <Border.Background>
                            <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                <GradientStop Color="#4CAF50" Offset="0"/>
                                <GradientStop Color="#2E7D32" Offset="1"/>
                            </LinearGradientBrush>
                        </Border.Background>
                        <iconPacks:PackIconMaterial Kind="TruckDelivery" Width="28" Height="28"
                                                     HorizontalAlignment="Center" VerticalAlignment="Center"
                                                     Foreground="White"/>
                    </Border>
                    
                    <StackPanel Grid.Column="1" VerticalAlignment="Center">
                        <TextBlock Text="{Binding WindowTitle}" FontSize="18" FontWeight="SemiBold"
                                   Foreground="{DynamicResource TextPrimaryBrush}"/>
                        <TextBlock Text="Enter supplier details below" FontSize="12"
                                   Foreground="{DynamicResource TextSecondaryBrush}" Margin="0,3,0,0"/>
                    </StackPanel>
                </Grid>
                
                <!-- Basic Information -->
                <Border Style="{DynamicResource CardBorder}" Padding="20" Margin="0,0,0,15">
                    <StackPanel>
                        <TextBlock Text="BASIC INFORMATION" FontSize="11" FontWeight="SemiBold" 
                                   Foreground="{DynamicResource TextSecondaryBrush}" Opacity="0.7" Margin="0,0,0,15"/>
                        
                        <TextBlock Text="Name *" Style="{DynamicResource FieldLabel}"/>
                        <TextBox x:Name="NameTextBox" Text="{Binding Name, UpdateSourceTrigger=PropertyChanged}" 
                                 Style="{DynamicResource ModernTextBox}" Margin="0,0,0,15"/>
                        
                        <TextBlock Text="Code" Style="{DynamicResource FieldLabel}"/>
                        <TextBox Text="{Binding Code, UpdateSourceTrigger=PropertyChanged}" 
                                 Style="{DynamicResource ModernTextBox}" Margin="0,0,0,15"
                                 CharacterCasing="Upper"/>
                        
                        <mah:ToggleSwitch IsOn="{Binding IsActive}" 
                                          Content="Active" 
                                          OnContent="Yes" OffContent="No"/>
                    </StackPanel>
                </Border>
                
                <!-- Contact Information -->
                <Border Style="{DynamicResource CardBorder}" Padding="20">
                    <StackPanel>
                        <TextBlock Text="CONTACT INFORMATION" FontSize="11" FontWeight="SemiBold" 
                                   Foreground="{DynamicResource TextSecondaryBrush}" Opacity="0.7" Margin="0,0,0,15"/>
                        
                        <TextBlock Text="Contact Person" Style="{DynamicResource FieldLabel}"/>
                        <TextBox Text="{Binding ContactPerson, UpdateSourceTrigger=PropertyChanged}" 
                                 Style="{DynamicResource ModernTextBox}" Margin="0,0,0,15"/>
                        
                        <TextBlock Text="Email" Style="{DynamicResource FieldLabel}"/>
                        <TextBox Text="{Binding Email, UpdateSourceTrigger=PropertyChanged}" 
                                 Style="{DynamicResource ModernTextBox}" Margin="0,0,0,15"/>
                        
                        <TextBlock Text="Phone" Style="{DynamicResource FieldLabel}"/>
                        <TextBox Text="{Binding Phone, UpdateSourceTrigger=PropertyChanged}" 
                                 Style="{DynamicResource ModernTextBox}" Margin="0,0,0,15"/>
                        
                        <TextBlock Text="Address" Style="{DynamicResource FieldLabel}"/>
                        <TextBox Text="{Binding Address, UpdateSourceTrigger=PropertyChanged}" 
                                 Style="{DynamicResource ModernTextBox}" 
                                 TextWrapping="Wrap" AcceptsReturn="True" Height="80"
                                 VerticalContentAlignment="Top"/>
                    </StackPanel>
                </Border>
                
                <!-- Error Message -->
                <Border Background="#33FF5252" CornerRadius="8" Padding="12" Margin="0,15,0,0"
                        Visibility="{Binding HasError, Converter={StaticResource BoolToVisibility}}">
                    <StackPanel Orientation="Horizontal">
                        <iconPacks:PackIconMaterial Kind="AlertCircle" Width="16" Height="16" 
                                                     Foreground="#FF5252" VerticalAlignment="Center" Margin="0,0,10,0"/>
                        <TextBlock Text="{Binding ErrorMessage}" Foreground="#FF5252" TextWrapping="Wrap"/>
                    </StackPanel>
                </Border>
            </StackPanel>
        </ScrollViewer>
        
        <!-- Footer -->
        <Border Grid.Row="1" Background="{DynamicResource SurfaceBrush}" Padding="25,15">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <Button Grid.Column="1" Content="Cancel" Click="CancelButton_Click"
                        Style="{DynamicResource SecondaryButton}" Width="100" Margin="0,0,10,0"/>
                
                <Button Grid.Column="2" Content="Save" Click="SaveButton_Click"
                        Style="{DynamicResource PrimaryButton}" Width="100"
                        IsEnabled="{Binding CanSave}"/>
            </Grid>
        </Border>
    </Grid>
</mah:MetroWindow>
