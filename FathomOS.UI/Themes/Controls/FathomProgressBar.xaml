<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:controls="clr-namespace:FathomOS.UI.Controls"
                    xmlns:converters="clr-namespace:FathomOS.UI.Converters">

    <!-- ============================================== -->
    <!-- FathomOS Design System - FathomProgressBar    -->
    <!-- Owned by: UI-AGENT                            -->
    <!-- DO NOT modify without UI-AGENT approval       -->
    <!-- ============================================== -->

    <Style TargetType="{x:Type controls:FathomProgressBar}">
        <Setter Property="FontFamily" Value="{DynamicResource FontPrimary}"/>
        <Setter Property="FontSize" Value="12"/>
        <Setter Property="Foreground" Value="{DynamicResource PrimaryBrush}"/>
        <Setter Property="Background" Value="{DynamicResource BackgroundTertiaryBrush}"/>
        <Setter Property="BorderThickness" Value="0"/>
        <Setter Property="Height" Value="8"/>
        <Setter Property="MinHeight" Value="4"/>
        <Setter Property="SnapsToDevicePixels" Value="True"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type controls:FathomProgressBar}">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>

                        <!-- Label (shown above the bar) -->
                        <TextBlock x:Name="ProgressLabel"
                                   Grid.Row="0"
                                   HorizontalAlignment="Right"
                                   Foreground="{DynamicResource TextSecondaryBrush}"
                                   FontSize="{TemplateBinding FontSize}"
                                   Margin="0,0,0,4"
                                   Visibility="Collapsed">
                            <TextBlock.Text>
                                <MultiBinding StringFormat="{}{0:0}%">
                                    <Binding Path="Value" RelativeSource="{RelativeSource TemplatedParent}"/>
                                </MultiBinding>
                            </TextBlock.Text>
                        </TextBlock>

                        <!-- Progress Track -->
                        <Border x:Name="PART_Track"
                                Grid.Row="1"
                                Background="{TemplateBinding Background}"
                                CornerRadius="{TemplateBinding CornerRadius}"
                                Height="{TemplateBinding Height}">

                            <!-- Progress Indicator -->
                            <Border x:Name="PART_Indicator"
                                    Background="{TemplateBinding Foreground}"
                                    CornerRadius="{TemplateBinding CornerRadius}"
                                    HorizontalAlignment="Left"/>
                        </Border>
                    </Grid>

                    <ControlTemplate.Triggers>
                        <!-- Show Label -->
                        <Trigger Property="ShowLabel" Value="True">
                            <Setter TargetName="ProgressLabel" Property="Visibility" Value="Visible"/>
                        </Trigger>

                        <!-- Size: Small (4px) -->
                        <Trigger Property="Size" Value="Small">
                            <Setter Property="Height" Value="4"/>
                            <Setter Property="CornerRadius" Value="2"/>
                        </Trigger>

                        <!-- Size: Medium (8px) - Default -->
                        <Trigger Property="Size" Value="Medium">
                            <Setter Property="Height" Value="8"/>
                            <Setter Property="CornerRadius" Value="4"/>
                        </Trigger>

                        <!-- Size: Large (16px) -->
                        <Trigger Property="Size" Value="Large">
                            <Setter Property="Height" Value="16"/>
                            <Setter Property="CornerRadius" Value="8"/>
                        </Trigger>

                        <!-- === VARIANT COLORS === -->

                        <!-- Primary Variant (Default) -->
                        <Trigger Property="Variant" Value="Primary">
                            <Setter Property="Foreground" Value="{DynamicResource PrimaryBrush}"/>
                        </Trigger>

                        <!-- Success Variant -->
                        <Trigger Property="Variant" Value="Success">
                            <Setter Property="Foreground" Value="{DynamicResource SuccessBrush}"/>
                        </Trigger>

                        <!-- Warning Variant -->
                        <Trigger Property="Variant" Value="Warning">
                            <Setter Property="Foreground" Value="{DynamicResource WarningBrush}"/>
                        </Trigger>

                        <!-- Error Variant -->
                        <Trigger Property="Variant" Value="Error">
                            <Setter Property="Foreground" Value="{DynamicResource ErrorBrush}"/>
                        </Trigger>

                        <!-- Info Variant -->
                        <Trigger Property="Variant" Value="Info">
                            <Setter Property="Foreground" Value="{DynamicResource InfoBrush}"/>
                        </Trigger>

                        <!-- Indeterminate State -->
                        <Trigger Property="IsIndeterminate" Value="True">
                            <Setter TargetName="PART_Indicator" Property="HorizontalAlignment" Value="Stretch"/>
                            <Setter TargetName="PART_Indicator" Property="Width" Value="Auto"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

</ResourceDictionary>
