<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:controls="clr-namespace:FathomOS.UI.Controls"
                    xmlns:converters="clr-namespace:FathomOS.UI.Converters">

    <!-- ============================================== -->
    <!-- FathomOS Design System - FathomSpinner        -->
    <!-- Owned by: UI-AGENT                            -->
    <!-- DO NOT modify without UI-AGENT approval       -->
    <!-- ============================================== -->

    <Style TargetType="{x:Type controls:FathomSpinner}">
        <Setter Property="FontFamily" Value="{DynamicResource FontPrimary}"/>
        <Setter Property="FontSize" Value="14"/>
        <Setter Property="Foreground" Value="{DynamicResource PrimaryBrush}"/>
        <Setter Property="Width" Value="32"/>
        <Setter Property="Height" Value="32"/>
        <Setter Property="SnapsToDevicePixels" Value="True"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type controls:FathomSpinner}">
                    <Grid x:Name="RootGrid">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <!-- Spinner Circle -->
                        <Viewbox x:Name="SpinnerViewbox"
                                 Grid.Row="0"
                                 Grid.Column="0"
                                 Width="{TemplateBinding Width}"
                                 Height="{TemplateBinding Height}"
                                 RenderTransformOrigin="0.5,0.5">
                            <Viewbox.RenderTransform>
                                <RotateTransform x:Name="SpinnerRotate" Angle="0"/>
                            </Viewbox.RenderTransform>

                            <Canvas Width="32" Height="32">
                                <!-- Track Circle (faint) -->
                                <Ellipse Width="32"
                                         Height="32"
                                         Stroke="{DynamicResource BackgroundTertiaryBrush}"
                                         StrokeThickness="{TemplateBinding StrokeThickness}"
                                         Fill="Transparent"/>

                                <!-- Spinner Arc -->
                                <Path x:Name="SpinnerArc"
                                      Stroke="{TemplateBinding Foreground}"
                                      StrokeThickness="{TemplateBinding StrokeThickness}"
                                      StrokeStartLineCap="Round"
                                      StrokeEndLineCap="Round"
                                      Fill="Transparent">
                                    <Path.Data>
                                        <PathGeometry>
                                            <PathFigure StartPoint="16,2">
                                                <ArcSegment Point="30,16"
                                                            Size="14,14"
                                                            SweepDirection="Clockwise"
                                                            IsLargeArc="False"/>
                                            </PathFigure>
                                        </PathGeometry>
                                    </Path.Data>
                                </Path>
                            </Canvas>
                        </Viewbox>

                        <!-- Label (Right placement) -->
                        <TextBlock x:Name="LabelRight"
                                   Grid.Row="0"
                                   Grid.Column="1"
                                   Text="{TemplateBinding Label}"
                                   Foreground="{DynamicResource TextSecondaryBrush}"
                                   FontSize="{TemplateBinding FontSize}"
                                   VerticalAlignment="Center"
                                   Margin="12,0,0,0"
                                   Visibility="Collapsed"/>

                        <!-- Label (Bottom placement) -->
                        <TextBlock x:Name="LabelBottom"
                                   Grid.Row="1"
                                   Grid.Column="0"
                                   Text="{TemplateBinding Label}"
                                   Foreground="{DynamicResource TextSecondaryBrush}"
                                   FontSize="{TemplateBinding FontSize}"
                                   HorizontalAlignment="Center"
                                   Margin="0,8,0,0"
                                   Visibility="Collapsed"/>
                    </Grid>

                    <ControlTemplate.Triggers>
                        <!-- Show Label Right -->
                        <MultiTrigger>
                            <MultiTrigger.Conditions>
                                <Condition Property="LabelPlacement" Value="Right"/>
                            </MultiTrigger.Conditions>
                            <Setter TargetName="LabelRight" Property="Visibility" Value="Visible"/>
                        </MultiTrigger>

                        <!-- Show Label Bottom -->
                        <MultiTrigger>
                            <MultiTrigger.Conditions>
                                <Condition Property="LabelPlacement" Value="Bottom"/>
                            </MultiTrigger.Conditions>
                            <Setter TargetName="LabelBottom" Property="Visibility" Value="Visible"/>
                        </MultiTrigger>

                        <!-- Hide labels if no text -->
                        <Trigger Property="Label" Value="">
                            <Setter TargetName="LabelRight" Property="Visibility" Value="Collapsed"/>
                            <Setter TargetName="LabelBottom" Property="Visibility" Value="Collapsed"/>
                        </Trigger>

                        <!-- Size: ExtraSmall (16px) -->
                        <Trigger Property="Size" Value="ExtraSmall">
                            <Setter Property="Width" Value="16"/>
                            <Setter Property="Height" Value="16"/>
                            <Setter Property="StrokeThickness" Value="2"/>
                        </Trigger>

                        <!-- Size: Small (24px) -->
                        <Trigger Property="Size" Value="Small">
                            <Setter Property="Width" Value="24"/>
                            <Setter Property="Height" Value="24"/>
                            <Setter Property="StrokeThickness" Value="2.5"/>
                        </Trigger>

                        <!-- Size: Medium (32px) - Default -->
                        <Trigger Property="Size" Value="Medium">
                            <Setter Property="Width" Value="32"/>
                            <Setter Property="Height" Value="32"/>
                            <Setter Property="StrokeThickness" Value="3"/>
                        </Trigger>

                        <!-- Size: Large (48px) -->
                        <Trigger Property="Size" Value="Large">
                            <Setter Property="Width" Value="48"/>
                            <Setter Property="Height" Value="48"/>
                            <Setter Property="StrokeThickness" Value="4"/>
                        </Trigger>

                        <!-- Size: ExtraLarge (64px) -->
                        <Trigger Property="Size" Value="ExtraLarge">
                            <Setter Property="Width" Value="64"/>
                            <Setter Property="Height" Value="64"/>
                            <Setter Property="StrokeThickness" Value="5"/>
                        </Trigger>

                        <!-- === COLOR VARIANTS === -->

                        <!-- Primary Variant (Default) -->
                        <Trigger Property="SpinnerColor" Value="Primary">
                            <Setter Property="Foreground" Value="{DynamicResource PrimaryBrush}"/>
                        </Trigger>

                        <!-- Secondary Variant -->
                        <Trigger Property="SpinnerColor" Value="Secondary">
                            <Setter Property="Foreground" Value="{DynamicResource TextSecondaryBrush}"/>
                        </Trigger>

                        <!-- White Variant -->
                        <Trigger Property="SpinnerColor" Value="White">
                            <Setter Property="Foreground" Value="#FFFFFF"/>
                        </Trigger>

                        <!-- Spinning Animation -->
                        <Trigger Property="IsSpinning" Value="True">
                            <Trigger.EnterActions>
                                <BeginStoryboard x:Name="SpinStoryboard">
                                    <Storyboard RepeatBehavior="Forever">
                                        <DoubleAnimation Storyboard.TargetName="SpinnerRotate"
                                                         Storyboard.TargetProperty="Angle"
                                                         From="0"
                                                         To="360"
                                                         Duration="0:0:1"/>
                                    </Storyboard>
                                </BeginStoryboard>
                            </Trigger.EnterActions>
                            <Trigger.ExitActions>
                                <StopStoryboard BeginStoryboardName="SpinStoryboard"/>
                            </Trigger.ExitActions>
                        </Trigger>

                        <!-- Not Spinning -->
                        <Trigger Property="IsSpinning" Value="False">
                            <Setter Property="Opacity" Value="0.5"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

</ResourceDictionary>
